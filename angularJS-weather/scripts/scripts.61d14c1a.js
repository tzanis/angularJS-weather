"use strict";angular.module("ngWeatherApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainController",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("ngWeatherApp").controller("MainController",["weatherService",function(a){this.weatherService=a,this.accessGranted=!1,this.userInput="",this.tempFormat="k";var b=this,c=function(b){console.log(b.coords),a.getWeather(b.coords)};this.weatherService.isLoading=!0,navigator.geolocation?this.accessGranted="undefined"!=typeof navigator.geolocation.getCurrentPosition(c):console.log("no geolocation available."),this.getWeather=function(){this.weatherService.isLoading=!0,console.log("_this.userInput",b.userInput),this.weatherService.userInput=b.userInput,a.getWeather()},this.updateTemp=function(a){var c="c"===a?b.weatherService.weatherData.main.temp-273.15:b.weatherService.weatherData.main.temp;b.weatherService.calculatedTemperature=c,b.tempFormat=a}}]),angular.module("ngWeatherApp").service("weatherService",["$http",function(a){this.isLoading=!1,this.userInput="",this.weatherData={},this.calculatedTemperature="-";var b=this;this.getWeather=function(c){c=c||{latitude:null,longitude:null},b.isLoading=!0;var d={};""!==b.userInput&&(d.q=b.userInput),a({url:"http://api.openweathermap.org/data/2.5/weather?lat="+c.latitude+"&lon="+c.longitude+"&appid=21e3d4a8c7f055be78c45b767f1d87a0",method:"GET",params:d}).then(function(a){console.log(a.data),b.isLoading=!1,b.weatherData=a.data,b.calculatedTemperature=a.data.main.temp})}}]),angular.module("ngWeatherApp").run(["$templateCache",function(a){a.put("views/main.html",'<div ng-if="!main.weatherService.weatherData.main"> <br> <div class="well well-lg"> <form> <div class="form-group"> <label for="userInput">Please provide a City name, postcode or country.</label> <input type="text" ng-model="main.userInput" class="form-control" id="userInput" placeholder="ie: London"> </div> <button type="submit" ng-click="main.getWeather()" class="btn btn-default">Submit</button> </form> </div> </div> <div ng-if="main.weatherService.weatherData.main" class="weather-info col-xs-6 col-md-offset-3"> <span ng-show="main.weatherService.isLoading" class="label label-primary pull-right label-lg">Fetching data..</span> <h2>{{ main.weatherService.weatherData.name }}</h2> <div class="col-xs-6"> <div> <img class="icon" ng-if="main.weatherService.weatherData.weather[0].icon" ng-src="{{\'http://openweathermap.org/img/w/\' + main.weatherService.weatherData.weather[0].icon + \'.png\'}}"> <span class="temp">{{ main.weatherService.calculatedTemperature | number:0}}</span> <div class="kelvin-vs-celsius"> <span ng-click="main.updateTemp(\'k\');" ng-class="{active: main.tempFormat == \'k\'}"><sup>o</sup>K</span> <span ng-click="main.updateTemp(\'c\');" ng-class="{active: main.tempFormat == \'c\'}"><sup>o</sup>C</span> </div> </div> <div class="details"> <strong>{{ main.weatherService.weatherData.weather[0].main }}</strong> <i>{{ main.weatherService.weatherData.weather[0].description }}</i> </div> </div> <div class="wind col-xs-6"> <span class="direction" style="-webkit-transform: rotate({{ main.weatherService.weatherData.wind.deg }}deg); transform: rotate({{ main.weatherService.weatherData.wind.deg }}deg)"> <span class="glyphicon glyphicon-arrow-right"></span> </span> <span class="speed">{{ main.weatherService.weatherData.wind.speed }} meter/sec</span> </div> <!--\n  -webkit-transform: rotate(7deg); transform: rotate(7deg);\n  --> </div>')}]);